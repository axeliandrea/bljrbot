<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FVCK MMOPRG - Register</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #1a1a1a;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
    padding: 20px;
  }
  h1 { text-align: center; }
  button {
    padding: 15px 25px;
    background: #5c2dc2;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
  }
  button:hover { background: #8b4ff7; }
</style>
</head>
<body>

<h1>Selamat Datang di FVCK MMOPRG</h1>
<p>Daftar menjadi player dengan Telegram</p>

<button id="loginBtn">Masuk dengan Telegram</button>

<script>
  // Ambil query string dari URL untuk cek apakah user baru kembali dari Telegram OAuth
  function getQueryParams() {
    const params = {};
    window.location.search.substring(1).split("&").forEach(pair => {
      const [key, value] = pair.split("=");
      if(key) params[decodeURIComponent(key)] = decodeURIComponent(value || '');
    });
    return params;
  }

  function handleOAuthReturn() {
    const params = getQueryParams();
    // Telegram OAuth akan mengirim: id, first_name, username, hash
    if(params.id && params.username) {
      alert(`âœ… Selamat! User ID ${params.id} dengan username @${params.username} telah berhasil registrasi di game FVCK MMOPRG.`);
      // Simpan data di localStorage (opsional)
      localStorage.setItem('playerData', JSON.stringify({id: params.id, username: params.username}));
      // Bersihkan query string dari URL
      window.history.replaceState({}, document.title, window.location.pathname);
    }
  }

  document.getElementById('loginBtn').addEventListener('click', () => {
    const bot_id = "8435004837"; // ganti sesuai bot kamu
    const origin = encodeURIComponent("https://axeliandrea.github.io");
    const return_to = encodeURIComponent("https://axeliandrea.github.io/bljrbot/");
    const url = `https://oauth.telegram.org/auth?bot_id=${bot_id}&origin=${origin}&embed=1&request_access=write&return_to=${return_to}`;
    window.location.href = url;
  });

  // Panggil saat halaman di-load untuk cek jika user kembali dari Telegram OAuth
  handleOAuthReturn();
</script>

</body>
</html>
